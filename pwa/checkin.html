<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>STTC Web App</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta name="theme-color" content="salmon" />
    <link rel="manifest" href="manifest.json" />
    <link rel="shortcut icon" href="assets/img/favicon.png">
    <link rel="apple-touch-icon" href="icon/icon.png">
    <link rel="stylesheet" href="assets/css/bootstrap.css" />
    <link rel="stylesheet" href="assets/css/font-awesome.css" />
    <link rel="stylesheet" href="assets/css/ace-fonts.css" />
    <link rel="stylesheet" href="assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" />
    <link rel="stylesheet" href="assets/css/ace-skins.css" />
    <link rel="stylesheet" href="assets/css/jquery-ui-1.10.4.custom.min.css " />
    <link rel="stylesheet" href="assets/css/template.css"/>
    <link rel="stylesheet" href="assets/css/sweet-alert.css">

    <!-- ace settings handler -->
    <script src="assets/js/ace-extra.js"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="assets/js/bootstrap.js"></script>
    <script src="assets/js/ace/ace.js"></script>
    <script src="assets/js/sweet-alert.js"></script>
    <script src="assets/js/handlebars-v3.js"></script>
    <script src="scripts/app.js"></script>
    <script src="scripts/template.js"></script>
    <script src="scripts/main.js"></script>
    <script src="scripts/api.js" async></script>
    <script src="assets/js/localforage.js"></script>
    <script src="assets/js/html5-qrcode.min.js"></script>
  </head>
  <body class="no-skin">
		<div id="loader">
        <div class="loader"></div>
		</div>
		<div id="loader-backdrop" style="position: fixed; width:100vw; height:100vh; background-color:white; opacity:0.3; display:none; z-index:9;"></div>
    <div id="navbar" class="navbar navbar-default">
      <div class="navbar-container" id="navbar-container">
        <div class="navbar-header">CHECK IN</div>
        <div class="navbar-buttons navbar-header pull-right">
          <div class="online-status" id="online-status">Online</div>
        </div>
      </div>
    </div>
    <div class="main-container" id="main-container">
      <div class="main-content">
        <div class="main-content-inner">
          <div class="page-content">
            <input type="hidden" id="scan-type" value="" />
            <input type="hidden" id="code" value="" />
            <div id="cam" class="hide" style="position: absolute; top:0; left:0; height: 100vh; width:100vw; z-index:10;">
              <div id="reader" style="width:100%;"></div>
            </div>
            <div class="row">
              <div class="col-xs-12 padding-5">
                <div class="tabbable">
                  <div class="tab-content" style="border:none; padding:0; padding-top:15px;">
                    <div id="home-tab" class="tab-pane">
                      <div class="row">
                        <div class="col-xs-12 text-center">
                          <div class="input-group">
                            <input type="text" class="form-control input-lg text-center" id="doc-num" placeholder="เลขที่เอกสาร" />
                            <span class="input-group-btn">
                              <button type="button" class="btn btn-lg btn-primary" onclick="submitDocument()">Submit</button>
                            </span>
                          </div>
                        </div>
                      </div>
                      <hr/>
                      <div class="row">
                        <div class="col-xs-12 padding-5 table-responsive text-center" id="promt-text">
                          <h1 class="grey">แสกน Barcode เพื่อโหลดข้อมูลสินค้า</h1>
                        </div>
                        <div class="col-xs-12 padding-5 table-responsive text-center" id="result"></div>

                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center hide" id="btn-save" style="margin-bottom:60px;">
                          <button type="button" class="btn btn-sm btn-danger btn-100" onclick="clearItem()">เคลียร์</button>
                          <button class="btn btn-sm btn-success btn-100" onclick="saveItem()">บันทึกลงโทรศัพท์</button>
                        </div>
                      </div>

                    </div><!-- home tab -->

                    <div id="detail-tab" class="tab-pane fade active in" style="margin-top:-10px;">
                      <div class="row">
                        <div class="col-xs-12 table-responsive" id="doc-table" style="margin-bottom:5px;"></div>
                        <div class="col-xs-12 table-responsive padding-5" id="detail-table" style="margin-bottom:60px;"></div>
                      </div><!-- row -->
                    </div> <!-- detail tab -->
                  </div> <!-- tab content -->
                </div> <!-- Tabable-->
              </div>
            </div> <!-- row -->

            <div onclick="scrollToTop()"
              style="width:25px; height:25px; color:white; background-color:#333333ee;
              font-size:15px; text-align:center; vertical-align: middle; position:fixed;
              bottom:125px; right:5px; z-index:100;"><i class="fa fa-angle-double-up"></i></div>
            <div onclick="scrollToButtom()"
              style="width:25px; height:25px; color:white; background-color:#333333ee;
              font-size:15px; text-align:center; vertical-align: middle; position:fixed;
              bottom:80px; right:5px; z-index:100;"><i class="fa fa-angle-double-down"></i></div>

            <div class="pg-footer">
              <div class="pg-footer-inner">
                <div class="pg-footer-content text-right">
                  <div class="footer-menu width-20">
                    <li><a href="javascript:home()"><i class="fa fa-home fa-2x white"></i><span>HOME</span></a></li>
                  </div>
                  <div class="footer-menu width-60 hide" id="scan-li">
                    <li id="btn-scan" class=""><a href="javascript:startScan()"><i class="fa fa-qrcode fa-2x white"></i><span>SCAN</span></a></li>
                    <li id="btn-stop" class="hide"><a href="javascript:stopScan()"><i class="fa fa-stop-circle fa-2x white"></i><span>STOP</span></a></li>
                  </div>
                  <div class="footer-menu width-60" id="sync-li">
                    <li><a href="#" onclick="syncItem()"><i class="fa fa-refresh fa-2x white"></i><span>SYNC ITEMS</span></a></li>
                  </div>
                  <div class="footer-menu width-20">
                    <li id="home" class=""><a href="#" onclick="showTab('home')"><i class="fa fa-file-o fa-2x white"></i><span>DOCUMENT</span></a></li>
                    <li id="detail" class="hide"><a href="#" onclick="showTab('detail')"><i class="fa fa-tags fa-2x white"></i><span>ITEMS LIST</span></a></li>
                  </div>
                </div>
              </div><!-- footer inner-->
            </div><!-- /.footer -->



            <div class="col-xs-12 text-center">
              <button type="button" class="btn btn-success btn-sm btn-100 margin-top-15 hide" id="btn-save-item" onclick="saveItem()">SAVE</button>
            </div>


          </div> <!-- pang content -->
      </div><!-- main content inner -->
    </div><!-- main content -->
  </div><!-- /.main-container -->



  <div class="modal fade" id="cameras-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog" style="width:500px; max-width:95%; margin-left:auto; margin-right:auto;">
     <div class="modal-content">
         <div class="modal-header">
         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
         <h4 class="modal-title">Choose Camera</h4>
         <input type="hidden" id="select-side" value="i" />
        </div>
        <div class="modal-body">
          <div class="row" id="cameras-list" style="padding-left:12px; padding-right:12px;">

          </div>
          <div class="err-label" id="camera-error"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-sm btn-default btn-100" onclick="closeModal('cameras-modal')">Close</button>
  				<button type="button" class="btn btn-sm btn-success btn-100" onclick="saveCameraId()">Choose</button>
        </div>
     </div>
   </div>
  </div>

  <script id="cameras-list-template" type="text/x-handlebarsTemplate">
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
    {{#each this}}
    <div class="radio">
      <label>
        <input type="radio" name="camera_id"  class="ace" maxlength="100"	value="{{id}}" />
        <span class="lbl">{{label}}</span>
      </label>
    </div>
    {{/each}}
  </div>
  </script>

  <script id="docnum-template" type="text/x-handlebarsTemplate">
  <table class="table table-striped border-1"style="margin-bottom:20px;">
    <thead>
      <tr>
        <th class="min-width-100 text-center">เลขที่</th>
        <th class="fix-width-100 text-center">จำนวน</th>
        <th class="fix-width-80 text-center"></th>
      </tr>
    </thead>
    {{#each this}}
      <tr>
        <td class="text-center">{{docnum}}</td>
        <td class="text-center">{{qty}}</td>
        <td class="text-center">
          <button type="button" class="btn btn-minier btn-danger" onclick="deleteStockByDocNum('{{docnum}}')">
            <i class="fa fa-trash"></i>
          </button>
        </td>
      </tr>
    {{/each}}
  </table>
	</script>

  <script id="stock-template" type="text/x-handlebarsTemplate">
  <table class="table table-striped border-1">
    <thead>
      <tr>
        <th class="fix-width-40 text-center">#</th>
        <th class="fix-width-100 text-center">docnum</th>
        <th class="fix-width-150 text-center">Serial</th>
        <th class="fix-wisth-120">Item Code</th>
        <th class="min-width-250">Item Name</th>
        <th class="fix-width-100 text-center">Warehouse</th>
      </tr>
    </thead>
    {{#each this}}
      <tr>
        <td class="text-center no"></td>
        <td class="text-center">{{docnum}}</td>
        <td class="text-center">{{serial}}</td>
        <td>{{code}}</td>
        <td>{{name}}</td>
        <td class="text-center">{{whCode}}</td>
      </tr>
    {{/each}}
  </table>
  </script>


  <script id="template" type="text/x-handlebarsTemplate">
  <table class="table table-bordered border-1" style="margin-bottom:20px;">
    <thead>
      <tr>
        <th class="fix-width-40 text-center">#</th>
        <th class="fix-width-100 text-center">DocNum</th>
        <th class="fix-width-150 text-center">Serial</th>
        <th class="fix-wisth-120">Item Code</th>
        <th class="min-width-250">Item Name</th>
        <th class="fix-width-100 text-center">Warehouse</th>
      </tr>
    </thead>
    {{#each this}}
      <tr>
        <td>
          {{no}}
          <input type="hidden" class="item-data" data-docnum="{{DocNum}}" data-serial="{{Serial}}" data-code="{{ItemCode}}" data-name="{{ItemName}}" data-wh="{{WhsCode}}" />
        </td>
        <td class="text-center">{{DocNum}}</td>
        <td class="text-center">{{Serial}}</td>
        <td>{{ItemCode}}</td>
        <td>{{ItemName}}</td>
        <td class="text-center">{{WhsCode}}</td>
      </tr>
    {{/each}}
  </table>
  </script>

  <script src="scripts/transfer/checkin.js"></script>

  <script>
    function scrollToTop() {
      window.scrollTo({top:0, behavior:'smooth'});
    }

    function scrollToButtom() {
      window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'});
    }

    function clearItem() {
      $('#result').html('');
      $('#btn-save').addClass('hide');
      $('#promt-text').removeClass('hide');
      scrollToTop();
    }

    function home() {
      let html = $('#result').text();

      if(html.length > 0) {
        swal({
          title:'Warning',
          text: 'คุณยังไม่ได้กดบันทึกข้อมูล<br/> กรุณากดบันทึ่ข้อมูลหรือกดเคลียร์ข้อมูลหากไม่ต้องการ',
          type:'warning',
          html:true
        });

        return false;
      }

      window.location.href = "index.html";
    }
  </script>

    <!-- ace scripts -->
    <script src="assets/js/ace/ace.sidebar.js"></script>
    <script src="assets/js/ace/ace.sidebar-scroll-1.js"></script>
    <script src="assets/js/ace/ace.submenu-hover.js"></script>
  </body>
</html>
